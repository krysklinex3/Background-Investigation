<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Georgia Counties Map</title>
</head>
<body>
  <h1><center>Georgia Counties</center></h1>
  <!-- GEORGIA COUNTY MAP - clickable -->
<div id="ga-map-container" style="max-width: 1000px; margin: 20px 0;">
  <!-- FULL GEORGIA COUNTY MAP -->
  <svg id="ga-map" style="width: 100%; height: auto; overflow: visible;">
    <path data-fips="13121" d="M 342.5602 456.7082 L 342.4146 464.9911..." fill="#e0e0e0" stroke="#333" stroke-width="0.5"/>
    <path data-fips="13089" d="M 342.269 470.362 L 342.4146 464.9911..." fill="#e0e0e0" stroke="#333" stroke-width="0.5"/>
  </svg>
</div>

  <p><a href="../index.html">Back to US map</a></p>

  <h2>County Investigation Links</h2>

  <label for="county-select">Choose a county:</label>
  <select id="county-select">
    <option value="">-- Select a county --</option>
    <option value="13121">Fulton</option>
    <option value="13089">DeKalb</option>
  </select>

  <h3 id="county-name-heading"></h3>

  <table id="county-links-table" border="1" cellpadding="4">
    <thead>
      <tr>
        <th>Category</th>
        <th>Label</th>
        <th>URL</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody>
      <!-- Rows will be filled by JavaScript -->
    </tbody>
  </table>

<script>
  // Wait for page + data to load
  document.addEventListener('DOMContentLoaded', async () => {
    const response = await fetch('../data/ga-counties.json');
    const counties = await response.json();

    const select = document.getElementById('county-select');
    const heading = document.getElementById('county-name-heading');
    const tbody = document.querySelector('#county-links-table tbody');

    function renderCounty(fips) {
      tbody.innerHTML = '';
      heading.textContent = '';

      if (!fips) return;

      const county = counties.find(c => c.fips === fips);
      if (!county) return;

      heading.textContent = county.name + ' County';

      const addRow = (category, item) => {
        const tr = document.createElement('tr');

        const tdCat = document.createElement('td');
        tdCat.textContent = category;

        const tdLabel = document.createElement('td');
        tdLabel.textContent = item.label;

        const tdUrl = document.createElement('td');
        const a = document.createElement('a');
        a.href = item.url;
        a.textContent = item.url;
        a.target = '_blank';
        tdUrl.appendChild(a);

        const tdNotes = document.createElement('td');
        tdNotes.textContent = item.notes || '';

        tr.appendChild(tdCat);
        tr.appendChild(tdLabel);
        tr.appendChild(tdUrl);
        tr.appendChild(tdNotes);
        tbody.appendChild(tr);
      };

      (county.courtSites || []).forEach(site => addRow('Court', site));
      (county.otherResources || []).forEach(res => addRow('Other', res));
    }

    // Dropdown still works
    select.addEventListener('change', () => {
      renderCounty(select.value);
    });

    // INLINE SVG - direct access (MUCH SIMPLER)
    document.querySelectorAll('#ga-map path[data-fips]').forEach(path => {
      path.style.cursor = 'pointer';
      path.style.transition = 'fill 0.2s';
      
      path.addEventListener('mouseenter', () => {
        path.style.fill = '#ff6b6b';
      });
      
      path.addEventListener('mouseleave', () => {
        path.style.fill = '#e0e0e0';
      });
      
      path.addEventListener('click', () => {
        const fips = path.getAttribute('data-fips');
        renderCounty(fips);
        select.value = fips;
      });
    });
  });
</script>


